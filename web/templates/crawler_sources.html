{% extends "base.html" %}

{% block title %}ETF Crawlers - AutoM2026{% endblock %}

{% block content %}
<div class="page-header">
    <div class="header-left">
        <h1>ETF Data Crawlers</h1>
        <p class="text-secondary">ç¡¬ç¼–ç  ETF æ•°æ®æºï¼Œæ¯ 6 å°æ—¶è‡ªåŠ¨çˆ¬å–</p>
    </div>
    <div class="header-right">
        <a href="/crawler/data" class="btn btn-secondary">
            <span class="icon">ğŸ“Š</span> View Data
        </a>
    </div>
</div>

<div class="card">
    <div class="table-container">
        <table>
            <thead>
                <tr>
                    <th>Name</th>
                    <th>URL</th>
                    <th>Spider Type</th>
                    <th>Interval</th>
                    <th>Last Run</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                {% for source in sources %}
                <tr>
                    <td class="font-medium">{{ source.name }}</td>
                    <td>
                        <a href="{{ source.url }}" target="_blank" class="text-link truncate"
                            style="max-width: 250px; display: inline-block;">
                            {{ source.url }}
                        </a>
                    </td>
                    <td><span class="badge">{{ source.spider_type }}</span></td>
                    <td>{{ source.interval }} min</td>
                    <td>
                        {% if source.last_run_at %}
                        {{ source.last_run_at.strftime('%Y-%m-%d %H:%M') }}
                        {% else %}
                        <span class="text-secondary">å°šæœªè¿è¡Œ</span>
                        {% endif %}
                    </td>
                    <td>
                        {% if source.is_running %}
                        <span class="badge badge-warning">Running...</span>
                        {% else %}
                        <span class="badge badge-success">Idle</span>
                        {% endif %}
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}